{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import { startServer } from './server.js';\n// 导出API函数供测试使用\nexport { generateImage, generateVideo, ASPECT_RATIO_PRESETS, ImageDimensionCalculator } from './api.js';\n\n// 处理未捕获的异常\nprocess.on('uncaughtException', (error) => {\n  console.error('未捕获的异常:', error);\n});\n\n// 处理未处理的Promise拒绝\nprocess.on('unhandledRejection', (reason, promise) => {\n  console.error('未处理的Promise拒绝:', reason);\n});\n\n// 启动服务器\nconst main = async () => {\n  try {\n    // required: JIMENG_API_TOKEN\n    if (!process.env.JIMENG_API_TOKEN) {\n      throw new Error('JIMENG_API_TOKEN is required!')\n    }\n\n    await startServer();\n  } catch (error) {\n    console.error('启动服务器时出错:', error);\n    process.exit(1);\n  }\n};\n\n// 只有在直接运行时才启动服务器\nif (import.meta.url === `file://${process.argv[1]}`) {\n  main();\n} "],"mappings":";;;;;;;;;AAKA,QAAQ,GAAG,qBAAqB,CAAC,UAAU;AACzC,UAAQ,MAAM,yCAAW,KAAK;AAChC,CAAC;AAGD,QAAQ,GAAG,sBAAsB,CAAC,QAAQ,YAAY;AACpD,UAAQ,MAAM,gDAAkB,MAAM;AACxC,CAAC;AAGD,IAAM,OAAO,YAAY;AACvB,MAAI;AAEF,QAAI,CAAC,QAAQ,IAAI,kBAAkB;AACjC,YAAM,IAAI,MAAM,+BAA+B;AAAA,IACjD;AAEA,UAAM,YAAY;AAAA,EACpB,SAAS,OAAO;AACd,YAAQ,MAAM,qDAAa,KAAK;AAChC,YAAQ,KAAK,CAAC;AAAA,EAChB;AACF;AAGA,IAAI,YAAY,QAAQ,UAAU,QAAQ,KAAK,CAAC,CAAC,IAAI;AACnD,OAAK;AACP;","names":[]}